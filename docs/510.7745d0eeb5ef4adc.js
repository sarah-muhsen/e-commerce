"use strict";(self.webpackChunkflashcart=self.webpackChunkflashcart||[]).push([[510],{9510:(h,l,r)=>{r.r(l),r.d(l,{ProductsComponent:()=>f});var n=r(6814),p=r(7163),d=r(460),t=r(4769),_=r(1132),a=r(6286),c=r(2425);const u=function(o){return["/details",o]};function v(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"header",5),t._UZ(3,"img",6),t.TgZ(4,"h3",7),t._uU(5),t.ALo(6,"cuttext"),t.qZA(),t.TgZ(7,"h4",8),t._uU(8),t.qZA(),t.TgZ(9,"div",9)(10,"span"),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"span"),t._UZ(14,"i",10),t._uU(15),t.qZA()()(),t.TgZ(16,"footer")(17,"button",11,12),t.NdJ("click",function(){const m=t.CHM(e).$implicit,P=t.MAs(18),C=t.oxw(2);return t.KtG(C.addproduct(m._id,P))}),t._uU(19,"Add To Product"),t.qZA()()()()}if(2&o){const e=g.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(14,u,e._id)),t.xp6(1),t.Q6J("src",e.imageCover,t.LSH)("alt",e.title)("title",e.title),t.xp6(2),t.Oqu(t.xi3(6,8,e.title,2)),t.xp6(3),t.Oqu(e.category.name),t.xp6(3),t.Oqu(t.xi3(12,11,e.price,"E\xa3")),t.xp6(4),t.hij(" ",e.ratingsAverage," ")}}function E(o,g){if(1&o&&(t.TgZ(0,"section")(1,"h3"),t._uU(2,"All Products"),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,v,20,16,"div",2),t.qZA()()),2&o){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.products)}}let f=(()=>{class o{constructor(e,i,s,m){this._ProductsService=e,this._CartService=i,this._ToastrService=s,this._Renderer2=m,this.products=[]}ngOnInit(){this._ProductsService.getproducts().subscribe({next:e=>{this.products=e.data}})}addproduct(e,i){this._Renderer2.setAttribute(i,"disabled","true"),this._CartService.addtocart(e).subscribe({next:s=>{console.log(s),console.log(s.message),console.log(s.numOfCartItems),this._ToastrService.success(s.message),this._CartService.cartnumber.next(s.numOfCartItems)}})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(_.s),t.Y36(a.N),t.Y36(c._W),t.Y36(t.Qsj))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-products"]],standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row","g-4"],["class","col-sm-6 col-md-4 col-lg-3 col-xl-2 h-100",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2","h-100"],["role","button",1,"product"],[3,"routerLink"],[1,"w-100",3,"src","alt","title"],[1,"h6","small"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center","small"],[1,"fas","fa-star","rating-color"],[1,"main-btn","w-100",3,"click"],["addbtn",""]],template:function(i,s){1&i&&t.YNc(0,E,5,1,"section",0),2&i&&t.Q6J("ngIf",s.products.length>0)},dependencies:[n.ez,n.sg,n.O5,n.H9,p.rH,d.r]})}return o})()},6286:(h,l,r)=>{r.d(l,{N:()=>t});var n=r(5619),p=r(4769),d=r(9862);let t=(()=>{class _{constructor(c){this._Htppclient=c,this.cartnumber=new n.X(0),this.mytoken={token:localStorage.getItem("etoken")}}addtocart(c){return this._Htppclient.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:c},{headers:this.mytoken})}getcart(){return this._Htppclient.get("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.mytoken})}deletecart(c){return this._Htppclient.delete(`https://ecommerce.routemisr.com/api/v1/cart/${c}`,{headers:this.mytoken})}updatecart(c,u){return this._Htppclient.put(`https://ecommerce.routemisr.com/api/v1/cart/${u}`,{count:c},{headers:this.mytoken})}clearcart(){return this._Htppclient.delete("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.mytoken})}checkout(c,u){return this._Htppclient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${c}?url=http://localhost:3000`,{shippingAddress:u},{headers:this.mytoken})}static#t=this.\u0275fac=function(u){return new(u||_)(p.LFG(d.eN))};static#e=this.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},1132:(h,l,r)=>{r.d(l,{s:()=>d});var n=r(4769),p=r(9862);let d=(()=>{class t{constructor(a){this._HttpClient=a}getproducts(a=1){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/products?page=${a}`)}getcategory(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/categories")}getdetail(a){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/products/${a}`)}static#t=this.\u0275fac=function(c){return new(c||t)(n.LFG(p.eN))};static#e=this.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()}}]);