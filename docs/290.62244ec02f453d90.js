"use strict";(self.webpackChunkflashcart=self.webpackChunkflashcart||[]).push([[290],{5290:(g,l,o)=>{o.r(l),o.d(l,{CartComponent:()=>v});var u=o(6814),p=o(7163),t=o(4769),d=o(6286);function s(r,h){if(1&r){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",10),t._UZ(2,"img",11),t.qZA(),t.TgZ(3,"div",12)(4,"div")(5,"h3",13),t._uU(6),t.qZA(),t.TgZ(7,"P",14),t._uU(8),t.qZA(),t.TgZ(9,"button",15),t.NdJ("click",function(){const _=t.CHM(e).$implicit,m=t.oxw(2);return t.KtG(m.removeitem(_.product._id))}),t._UZ(10,"i",16),t._uU(11," remove"),t.qZA()(),t.TgZ(12,"div")(13,"button",17),t.NdJ("click",function(){const _=t.CHM(e).$implicit,m=t.oxw(2);return t.KtG(m.changecount(_.count+1,_.product._id))}),t._uU(14,"+"),t.qZA(),t.TgZ(15,"span",18),t._uU(16),t.qZA(),t.TgZ(17,"button",17),t.NdJ("click",function(){const _=t.CHM(e).$implicit,m=t.oxw(2);return t.KtG(m.changecount(_.count-1,_.product._id))}),t._uU(18,"-"),t.qZA()()()()}if(2&r){const e=h.$implicit;t.xp6(2),t.Q6J("src",e.product.imageCover,t.LSH)("alt",e.product.title),t.xp6(4),t.Oqu(e.product.title),t.xp6(2),t.hij("price:",e.price,"EGP"),t.xp6(8),t.Oqu(e.count)}}const C=function(r){return["/payment",r]};function n(r,h){if(1&r){const e=t.EpF();t.TgZ(0,"section",2)(1,"div",3)(2,"h1",4),t._uU(3,"shop cart"),t.qZA(),t.TgZ(4,"button",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.clear())}),t._uU(5,"Clear All"),t.qZA()(),t.TgZ(6,"p"),t._uU(7),t.qZA(),t.YNc(8,s,19,5,"div",6),t.TgZ(9,"button",7),t._uU(10," online payment "),t._UZ(11,"img",8),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(7),t.hij("total price:",e.cart.data.totalCartPrice,""),t.xp6(1),t.Q6J("ngForOf",e.cart.data.products),t.xp6(1),t.Q6J("routerLink",t.VKq(3,C,e.cart.data._id))}}function a(r,h){1&r&&(t.TgZ(0,"h2",19),t._uU(1,"your cart is empty"),t.qZA())}let v=(()=>{class r{constructor(e){this._CartService=e,this.cart=null}ngOnInit(){this._CartService.getcart().subscribe({next:e=>{console.log(e),this.cart=e}})}removeitem(e){this._CartService.deletecart(e).subscribe({next:c=>{console.log(c),this.cart=c,this._CartService.cartnumber.next(c.numOfCartItems)}})}changecount(e,c){e>=1&&this._CartService.updatecart(e,c).subscribe({next:i=>{console.log(i),this.cart=i}})}clear(){this._CartService.clearcart().subscribe({next:e=>{"success"===e.message&&(this.cart=null,this._CartService.cartnumber.next(0))}})}static#t=this.\u0275fac=function(c){return new(c||r)(t.Y36(d.N))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-cart"]],standalone:!0,features:[t.jDz],decls:3,vars:1,consts:[["class","w-75 mx-auto rounded shadow bg-main-light mb-4",4,"ngIf"],["name",""],[1,"w-75","mx-auto","rounded","shadow","bg-main-light","mb-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"h4"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],["class","row border-bottom py-2",4,"ngFor","ngForOf"],["routerLinkActive","router-link-active",1,"main-btn","mt-3",3,"routerLink"],["src","../../../assets/images/visa-1.svg","alt","visa logo"],[1,"row","border-bottom","py-2"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","justify-content-between","align-items-center"],[1,"h6","mb-0"],[1,"text-main","small","mb-0"],[1,"btn","m-0","p-0","text-main",3,"click"],[1,"fa-regular","fa-trash-can"],[1,"btn","btn-sm","border-success",3,"click"],[1,"mx-1"],[1,"text-center"]],template:function(c,i){1&c&&(t.YNc(0,n,12,5,"section",0),t.YNc(1,a,2,0,"ng-template",null,1,t.W1O)),2&c&&t.Q6J("ngIf",i.cart)},dependencies:[u.ez,u.sg,u.O5,p.rH]})}return r})()},6286:(g,l,o)=>{o.d(l,{N:()=>d});var u=o(5619),p=o(4769),t=o(9862);let d=(()=>{class s{constructor(n){this._Htppclient=n,this.cartnumber=new u.X(0),this.mytoken={token:localStorage.getItem("etoken")}}addtocart(n){return this._Htppclient.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:n},{headers:this.mytoken})}getcart(){return this._Htppclient.get("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.mytoken})}deletecart(n){return this._Htppclient.delete(`https://ecommerce.routemisr.com/api/v1/cart/${n}`,{headers:this.mytoken})}updatecart(n,a){return this._Htppclient.put(`https://ecommerce.routemisr.com/api/v1/cart/${a}`,{count:n},{headers:this.mytoken})}clearcart(){return this._Htppclient.delete("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.mytoken})}checkout(n,a){return this._Htppclient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${n}?url=http://localhost:3000`,{shippingAddress:a},{headers:this.mytoken})}static#t=this.\u0275fac=function(a){return new(a||s)(p.LFG(t.eN))};static#e=this.\u0275prov=p.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()}}]);