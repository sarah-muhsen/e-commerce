"use strict";(self.webpackChunkflashcart=self.webpackChunkflashcart||[]).push([[177],{5177:(h,i,r)=>{r.r(i),r.d(i,{PaymentComponent:()=>p});var m=r(6814),e=r(95),t=r(4769),l=r(7163),n=r(6286);let p=(()=>{class o{constructor(s,c){this._ActivatedRoute=s,this._CartService=c,this.cartid="",this.orderform=new e.cw({details:new e.NI(""),phone:new e.NI(""),city:new e.NI("")})}handleform(){console.log(this.orderform.value),this._CartService.checkout(this.cartid,this.orderform.value).subscribe({next:s=>{"success"==s.status&&window.open(s.session.url,"_self")}})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:s=>{this.cartid=s.get("id"),console.log(this.cartid)}})}static#t=this.\u0275fac=function(c){return new(c||o)(t.Y36(l.gz),t.Y36(n.N))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-payment"]],standalone:!0,features:[t.jDz],decls:18,vars:1,consts:[[1,"w-75","mx-auto","roundede","mb-3","p-3","shadow"],[3,"formGroup"],[1,"form-item"],["for","details"],["type","text","id","details","formControlName","details",1,"form-control"],["for","phone"],["type","number","id","phone","formControlName","phone",1,"form-control"],["for","city"],["type","text","id","city","formControlName","city",1,"form-control"],[1,"main-btn","mt-3",3,"click"]],template:function(c,u){1&c&&(t.TgZ(0,"section",0)(1,"form",1)(2,"h1"),t._uU(3,"checkout session"),t.qZA(),t.TgZ(4,"div",2)(5,"label",3),t._uU(6,"details"),t.qZA(),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"div",2)(9,"label",5),t._uU(10,"phone"),t.qZA(),t._UZ(11,"input",6),t.qZA(),t.TgZ(12,"div",2)(13,"label",7),t._uU(14,"city"),t.qZA(),t._UZ(15,"input",8),t.qZA(),t.TgZ(16,"button",9),t.NdJ("click",function(){return u.handleform()}),t._uU(17," checkout"),t.qZA()()()),2&c&&(t.xp6(1),t.Q6J("formGroup",u.orderform))},dependencies:[m.ez,e.UX,e._Y,e.Fj,e.wV,e.JJ,e.JL,e.sg,e.u]})}return o})()},6286:(h,i,r)=>{r.d(i,{N:()=>l});var m=r(5619),e=r(4769),t=r(9862);let l=(()=>{class n{constructor(o){this._Htppclient=o,this.cartnumber=new m.X(0),this.mytoken={token:localStorage.getItem("etoken")}}addtocart(o){return this._Htppclient.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:o},{headers:this.mytoken})}getcart(){return this._Htppclient.get("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.mytoken})}deletecart(o){return this._Htppclient.delete(`https://ecommerce.routemisr.com/api/v1/cart/${o}`,{headers:this.mytoken})}updatecart(o,a){return this._Htppclient.put(`https://ecommerce.routemisr.com/api/v1/cart/${a}`,{count:o},{headers:this.mytoken})}clearcart(){return this._Htppclient.delete("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.mytoken})}checkout(o,a){return this._Htppclient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${o}?url=http://localhost:3000`,{shippingAddress:a},{headers:this.mytoken})}static#t=this.\u0275fac=function(a){return new(a||n)(e.LFG(t.eN))};static#e=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()}}]);